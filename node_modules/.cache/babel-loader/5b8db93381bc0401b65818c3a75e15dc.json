{"ast":null,"code":"var _jsxFileName = \"/home/anshul/portis-react-starter/src/components/SendTransferForm.js\";\nimport React, { Component } from 'react';\nimport { web3, portis } from \"../services/web3\";\nimport { abi } from \"../abi/Transaction.js\";\nimport LocationPopup from '../LocationPopup.js';\nconst contractAddress = '0x3f43A1dbaC5E9fd719051865e7DDA14ebe81e345';\nconst TransactionContract = new web3.eth.Contract(abi, contractAddress);\nvar a = '';\nexport function check(owneradd, value) {\n  new SendTransferForm().sendTransfer(owneradd, value); // console.log(owneradd);\n  // console.log(value);\n}\nexport default class SendTransferForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      senderAddress: '',\n      receiverAddress: '',\n      amount: 1,\n      senderBalance: 5,\n      receiverBalance: 0,\n      message: ''\n    };\n  }\n\n  activateMenu() {\n    portis.showPortis();\n  }\n\n  async sendTransfer() {\n    // console.log(owneradd + value);\n    // this.state.receiverAddress=owneradd;\n    // this.state.amount=value;\n    console.log(this.state.senderBalance);\n    console.log(\"A\");\n\n    if (this.state.senderBalance > 0) {\n      console.log(\"B\");\n\n      try {\n        console.log(\"C\"); // console.log(owneradd + value);\n\n        console.log(\"try started\");\n        await TransactionContract.methods.transferFunds(this.state.receiverAddress).send({\n          from: this.state.senderAddress,\n          value: web3.utils.toWei(this.state.amount.toString(), 'ether')\n        }, (error, result) => {\n          if (error) {\n            console.log(\"I will give error\");\n            this.setState({\n              message: 'error:' + error.message\n            });\n          } else {\n            this.setState({\n              message: 'transaction hash:' + result\n            });\n          }\n        });\n      } catch (error) {\n        console.log(\"try failed\");\n        this.setState({\n          message: 'the transfer has failed'\n        });\n      }\n    }\n  }\n\n  async checkBalance() {\n    let senderBalance = 0;\n    let receiverBalance = 0;\n    let message = '';\n\n    if (web3.utils.isAddress(this.state.senderAddress)) {\n      senderBalance = web3.utils.fromWei(await web3.eth.getBalance(this.state.senderAddress));\n    } else {\n      message = 'Error: Incorrect etherum address for the sender';\n    }\n\n    if (this.state.receiverAddress) {\n      if (web3.utils.isAddress(this.state.receiverAddress)) {\n        receiverBalance = web3.utils.fromWei(await web3.eth.getBalance(this.state.receiverAddress));\n      } else {\n        message = 'Error: Incoreect etherum address for the receiver';\n      }\n    }\n\n    this.setState({\n      senderBalance,\n      receiverBalance,\n      message\n    });\n  }\n\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  componentDidMount() {\n    portis.onLogin(senderAddress => {\n      this.setState({\n        senderAddress\n      });\n      this.checkBalance();\n    });\n    portis.onActiveWalletChanged(senderAddress => {\n      this.setState({\n        senderAddress\n      });\n      this.checkBalance();\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"nine columns smallTop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 16\n      }\n    }, this.state.message && /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 42\n      }\n    }, this.state.message)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"three columns u-pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"u-full-width\",\n      onClick: this.activateMenu,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 19\n      }\n    }, \"Portis Menu\"))), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row smallTop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"six columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 22\n      }\n    }, \"Sender Address\"), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"senderAddress\",\n      value: this.state.senderAddress,\n      type: \"text\",\n      className: \"u-full-width\",\n      placeholder: \"Loading...\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 22\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"six columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 22\n      }\n    }, \"Receiver Address\"), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"receiverAddress\",\n      value: this.state.receiverAddress,\n      type: \"text\",\n      className: \"u-full-width\",\n      placeholder: \"Enter the receiver address\",\n      required: true,\n      onChange: this.onChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 22\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"six columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 22\n      }\n    }, \"Amount\"), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"amount\",\n      value: this.state.amount,\n      type: \"text\",\n      className: \"u-full-width\",\n      placeholder: \"Amount to send\",\n      required: true,\n      onChange: this.onChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 22\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"three columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 22\n      }\n    }, \"Sender Balance\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 22\n      }\n    }, this.state.senderBalance, \" ETH\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"three columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 22\n      }\n    }, \"Receiver Balance\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 22\n      }\n    }, this.state.receiverBalance, \" ETH\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"six columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"button-primary u-full-width\",\n      disabled: !this.state.receiverAddress,\n      onClick: this.sendTransfer.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 22\n      }\n    }, \"Transfer\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"six columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"u-full-width\",\n      onClick: this.checkBalance.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 22\n      }\n    }, \"Check Balance\")))));\n  }\n\n}","map":{"version":3,"sources":["/home/anshul/portis-react-starter/src/components/SendTransferForm.js"],"names":["React","Component","web3","portis","abi","LocationPopup","contractAddress","TransactionContract","eth","Contract","a","check","owneradd","value","SendTransferForm","sendTransfer","constructor","props","state","senderAddress","receiverAddress","amount","senderBalance","receiverBalance","message","activateMenu","showPortis","console","log","methods","transferFunds","send","from","utils","toWei","toString","error","result","setState","checkBalance","isAddress","fromWei","getBalance","onChange","e","target","name","componentDidMount","onLogin","onActiveWalletChanged","render","bind"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAQC,IAAR,EAAaC,MAAb,QAA0B,kBAA1B;AAEA,SAAQC,GAAR,QAAkB,uBAAlB;AACA,OAAOC,aAAP,MAA0B,qBAA1B;AACA,MAAMC,eAAe,GAAG,4CAAxB;AACA,MAAMC,mBAAmB,GAAG,IAAIL,IAAI,CAACM,GAAL,CAASC,QAAb,CAAsBL,GAAtB,EAA2BE,eAA3B,CAA5B;AACA,IAAII,CAAC,GAAC,EAAN;AAEA,OAAO,SAASC,KAAT,CAAeC,QAAf,EAAwBC,KAAxB,EAA8B;AAClC,MAAIC,gBAAJ,GAAuBC,YAAvB,CAAoCH,QAApC,EAA6CC,KAA7C,EADkC,CAElC;AACA;AACF;AAGD,eAAe,MAAMC,gBAAN,SAA+Bb,SAA/B,CAAyC;AACrDe,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAChB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACVC,MAAAA,aAAa,EAAE,EADL;AAEVC,MAAAA,eAAe,EAAE,EAFP;AAGVC,MAAAA,MAAM,EAAE,CAHE;AAIVC,MAAAA,aAAa,EAAE,CAJL;AAKVC,MAAAA,eAAe,EAAE,CALP;AAMVC,MAAAA,OAAO,EAAE;AANC,KAAb;AAQF;;AAEDC,EAAAA,YAAY,GAAE;AACXtB,IAAAA,MAAM,CAACuB,UAAP;AACF;;AAED,QAAMX,YAAN,GAAoB;AACjB;AACA;AACA;AACAY,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAL,CAAWI,aAAvB;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;;AACA,QAAG,KAAKV,KAAL,CAAWI,aAAX,GAAyB,CAA5B,EAA8B;AAC3BK,MAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;;AACA,UAAG;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ,EADA,CAEA;;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA,cAAMrB,mBAAmB,CAACsB,OAApB,CACFC,aADE,CACY,KAAKZ,KAAL,CAAWE,eADvB,EAEFW,IAFE,CAEG;AACHC,UAAAA,IAAI,EAAC,KAAKd,KAAL,CAAWC,aADb;AAEHN,UAAAA,KAAK,EAACX,IAAI,CAAC+B,KAAL,CAAWC,KAAX,CACH,KAAKhB,KAAL,CAAWG,MAAX,CAAkBc,QAAlB,EADG,EAEH,OAFG;AAFH,SAFH,EASH,CAACC,KAAD,EAAOC,MAAP,KAAgB;AACb,cAAGD,KAAH,EAAS;AACNT,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,iBAAKU,QAAL,CAAc;AAACd,cAAAA,OAAO,EAAC,WAASY,KAAK,CAACZ;AAAxB,aAAd;AACF,WAHD,MAII;AACD,iBAAKc,QAAL,CAAc;AAACd,cAAAA,OAAO,EAAC,sBAAoBa;AAA7B,aAAd;AACF;AACH,SAjBE,CAAN;AAmBC,OAvBJ,CAwBA,OAAMD,KAAN,EAAY;AACTT,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,aAAKU,QAAL,CAAc;AAACd,UAAAA,OAAO,EAAC;AAAT,SAAd;AACF;AAEH;AACH;;AAED,QAAMe,YAAN,GAAoB;AACjB,QAAIjB,aAAa,GAAC,CAAlB;AACA,QAAIC,eAAe,GAAC,CAApB;AACA,QAAIC,OAAO,GAAC,EAAZ;;AAEA,QAAGtB,IAAI,CAAC+B,KAAL,CAAWO,SAAX,CAAqB,KAAKtB,KAAL,CAAWC,aAAhC,CAAH,EAAmD;AAC7CG,MAAAA,aAAa,GAACpB,IAAI,CAAC+B,KAAL,CAAWQ,OAAX,CACR,MAAMvC,IAAI,CAACM,GAAL,CAASkC,UAAT,CAAoB,KAAKxB,KAAL,CAAWC,aAA/B,CADE,CAAd;AAGL,KAJD,MAKI;AACEK,MAAAA,OAAO,GAAC,iDAAR;AACL;;AAED,QAAG,KAAKN,KAAL,CAAWE,eAAd,EAA8B;AACxB,UAAGlB,IAAI,CAAC+B,KAAL,CAAWO,SAAX,CAAqB,KAAKtB,KAAL,CAAWE,eAAhC,CAAH,EAAoD;AAC9CG,QAAAA,eAAe,GAACrB,IAAI,CAAC+B,KAAL,CAAWQ,OAAX,CACV,MAAMvC,IAAI,CAACM,GAAL,CAASkC,UAAT,CAAoB,KAAKxB,KAAL,CAAWE,eAA/B,CADI,CAAhB;AAGL,OAJD,MAKI;AACEI,QAAAA,OAAO,GAAG,mDAAV;AACL;AACN;;AACD,SAAKc,QAAL,CAAc;AAAChB,MAAAA,aAAD;AAAeC,MAAAA,eAAf;AAA+BC,MAAAA;AAA/B,KAAd;AACL;;AAEEmB,EAAAA,QAAQ,CAACC,CAAD,EAAI;AACT,SAAKN,QAAL,CAAc;AAAE,OAACM,CAAC,CAACC,MAAF,CAASC,IAAV,GAAiBF,CAAC,CAACC,MAAF,CAAShC;AAA5B,KAAd;AACF;;AAEDkC,EAAAA,iBAAiB,GAAG;AACjB5C,IAAAA,MAAM,CAAC6C,OAAP,CAAgB7B,aAAD,IAAiB;AAC7B,WAAKmB,QAAL,CAAc;AAACnB,QAAAA;AAAD,OAAd;AACA,WAAKoB,YAAL;AACF,KAHD;AAKApC,IAAAA,MAAM,CAAC8C,qBAAP,CAA8B9B,aAAD,IAAiB;AAC3C,WAAKmB,QAAL,CAAc;AAACnB,QAAAA;AAAD,OAAd;AACA,WAAKoB,YAAL;AACF,KAHD;AAIF;;AAEDW,EAAAA,MAAM,GAAG;AACN,wBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,KAAKhC,KAAL,CAAWM,OAAX,iBAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAKN,KAAL,CAAWM,OAAf,CAD1B,CADH,eAIG;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,cAAhC;AAA+C,MAAA,OAAO,EAAE,KAAKC,YAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADH,CAJH,CADH,eAYG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADH,eAEG;AACG,MAAA,IAAI,EAAC,eADR;AAEG,MAAA,KAAK,EAAE,KAAKP,KAAL,CAAWC,aAFrB;AAGG,MAAA,IAAI,EAAC,MAHR;AAIG,MAAA,SAAS,EAAC,cAJb;AAKG,MAAA,WAAW,EAAC,YALf;AAMG,MAAA,QAAQ,MANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CADH,eAYG;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADH,eAEG;AACG,MAAA,IAAI,EAAC,iBADR;AAEG,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWE,eAFrB;AAGG,MAAA,IAAI,EAAC,MAHR;AAIG,MAAA,SAAS,EAAC,cAJb;AAKG,MAAA,WAAW,EAAC,4BALf;AAMG,MAAA,QAAQ,MANX;AAOG,MAAA,QAAQ,EAAE,KAAKuB,QAAL,CAAcQ,IAAd,CAAmB,IAAnB,CAPb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CAZH,CADH,eA0BG;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADH,eAEG;AACG,MAAA,IAAI,EAAC,QADR;AAEG,MAAA,KAAK,EAAE,KAAKjC,KAAL,CAAWG,MAFrB;AAGG,MAAA,IAAI,EAAC,MAHR;AAIG,MAAA,SAAS,EAAC,cAJb;AAKG,MAAA,WAAW,EAAC,gBALf;AAMG,MAAA,QAAQ,MANX;AAOG,MAAA,QAAQ,EAAE,KAAKsB,QAAL,CAAcQ,IAAd,CAAmB,IAAnB,CAPb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CADH,eAaG;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADH,eAEG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAKjC,KAAL,CAAWI,aAAf,SAFH,CAbH,eAiBG;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADH,eAEG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAKJ,KAAL,CAAWK,eAAf,SAFH,CAjBH,CA1BH,eAgDG;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AACG,MAAA,IAAI,EAAC,QADR;AAEG,MAAA,SAAS,EAAC,6BAFb;AAGG,MAAA,QAAQ,EAAE,CAAC,KAAKL,KAAL,CAAWE,eAHzB;AAIG,MAAA,OAAO,EAAE,KAAKL,YAAL,CAAkBoC,IAAlB,CAAuB,IAAvB,CAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADH,CADH,eAWG;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,cAAhC;AAA+C,MAAA,OAAO,EAAE,KAAKZ,YAAL,CAAkBY,IAAlB,CAAuB,IAAvB,CAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADH,CAXH,CAhDH,CAZH,CADH;AAiFF;;AAtLoD","sourcesContent":["import React, { Component } from 'react';\nimport {web3,portis} from \"../services/web3\";\n\nimport {abi} from \"../abi/Transaction.js\";\nimport LocationPopup from '../LocationPopup.js';\nconst contractAddress = '0x3f43A1dbaC5E9fd719051865e7DDA14ebe81e345';\nconst TransactionContract = new web3.eth.Contract(abi, contractAddress); \nvar a='';\n\nexport function check(owneradd,value){\n   new SendTransferForm().sendTransfer(owneradd,value);\n   // console.log(owneradd);\n   // console.log(value);\n}\n\n\nexport default class SendTransferForm extends Component {\n   constructor(props) {\n      super(props);\n      this.state = {\n         senderAddress: '',\n         receiverAddress: '',\n         amount: 1,\n         senderBalance: 5,\n         receiverBalance: 0,\n         message: '',\n      };\n   }\n\n   activateMenu(){\n      portis.showPortis();\n   }\n\n   async sendTransfer(){\n      // console.log(owneradd + value);\n      // this.state.receiverAddress=owneradd;\n      // this.state.amount=value;\n      console.log(this.state.senderBalance);\n      console.log(\"A\");\n      if(this.state.senderBalance>0){\n         console.log(\"B\");\n         try{\n            console.log(\"C\");\n            // console.log(owneradd + value);\n            console.log(\"try started\");\n            await TransactionContract.methods\n               .transferFunds(this.state.receiverAddress)\n               .send({\n                  from:this.state.senderAddress,\n                  value:web3.utils.toWei(\n                     this.state.amount.toString(),\n                     'ether'\n                  )\n               },\n               (error,result)=>{\n                  if(error){\n                     console.log(\"I will give error\");\n                     this.setState({message:'error:'+error.message});\n                  }\n                  else{\n                     this.setState({message:'transaction hash:'+result});\n                  }\n               }\n               );\n            }\n         catch(error){\n            console.log(\"try failed\");\n            this.setState({message:'the transfer has failed'});\n         }\n         \n      }\n   }\n\n   async checkBalance(){\n      let senderBalance=0;\n      let receiverBalance=0;\n      let message='';\n\n      if(web3.utils.isAddress(this.state.senderAddress)) {\n            senderBalance=web3.utils.fromWei(\n                  await web3.eth.getBalance(this.state.senderAddress)\n            );\n      }\n      else{\n            message='Error: Incorrect etherum address for the sender';\n      }\n\n      if(this.state.receiverAddress){\n            if(web3.utils.isAddress(this.state.receiverAddress)){\n                  receiverBalance=web3.utils.fromWei(\n                        await web3.eth.getBalance(this.state.receiverAddress)\n                  );\n            }\n            else{\n                  message = 'Error: Incoreect etherum address for the receiver';\n            }\n      }\n      this.setState({senderBalance,receiverBalance,message});\n}\n\n   onChange(e) {\n      this.setState({ [e.target.name]: e.target.value });\n   }\n\n   componentDidMount() {\n      portis.onLogin((senderAddress)=>{\n         this.setState({senderAddress});\n         this.checkBalance();\n      })\n\n      portis.onActiveWalletChanged((senderAddress)=>{\n         this.setState({senderAddress});\n         this.checkBalance();\n      })\n   }\n\n   render() {\n      return (\n         <div>\n            <div className=\"row\">\n               <div className=\"nine columns smallTop\">\n                  {this.state.message && <b>{this.state.message}</b>}\n               </div>\n               <div className=\"three columns u-pull-right\">\n                  <button type=\"button\" className=\"u-full-width\" onClick={this.activateMenu}>\n                     Portis Menu\n                  </button>\n               </div>\n            </div>\n\n            <form>\n               <div className=\"row smallTop\">\n                  <div className=\"six columns\">\n                     <label>Sender Address</label>\n                     <input\n                        name=\"senderAddress\"\n                        value={this.state.senderAddress}\n                        type=\"text\"\n                        className=\"u-full-width\"\n                        placeholder=\"Loading...\"\n                        disabled\n                     />\n                  </div>\n                  <div className=\"six columns\">\n                     <label>Receiver Address</label>\n                     <input\n                        name=\"receiverAddress\"\n                        value={this.state.receiverAddress}\n                        type=\"text\"\n                        className=\"u-full-width\"\n                        placeholder=\"Enter the receiver address\"\n                        required\n                        onChange={this.onChange.bind(this)}\n                     />\n                  </div>\n               </div>\n               <div className=\"row\">\n                  <div className=\"six columns\">\n                     <label>Amount</label>\n                     <input\n                        name=\"amount\"\n                        value={this.state.amount}\n                        type=\"text\"\n                        className=\"u-full-width\"\n                        placeholder=\"Amount to send\"\n                        required\n                        onChange={this.onChange.bind(this)}\n                     />\n                  </div>\n                  <div className=\"three columns\">\n                     <label>Sender Balance</label>\n                     <p>{this.state.senderBalance} ETH</p>\n                  </div>\n                  <div className=\"three columns\">\n                     <label>Receiver Balance</label>\n                     <p>{this.state.receiverBalance} ETH</p>\n                  </div>\n               </div>\n               <div className=\"row\">\n                  <div className=\"six columns\">\n                     <button\n                        type=\"button\"\n                        className=\"button-primary u-full-width\"\n                        disabled={!this.state.receiverAddress}\n                        onClick={this.sendTransfer.bind(this)}\n                     >\n                        Transfer\n                     </button>\n                  </div>\n                  <div className=\"six columns\">\n                     <button type=\"button\" className=\"u-full-width\" onClick={this.checkBalance.bind(this)}>\n                        Check Balance\n                     </button>\n                  </div>\n               </div>\n            </form>\n         </div>\n      );\n   }\n}\n"]},"metadata":{},"sourceType":"module"}